<div class="custom-dropdown"
     [class.error]="isInvalid"
     [class.active]="isOpen"
     [class.has-value]="selectedValue">

  <span class="dropdown-label"
        [ngClass]="{
          'label-default': !isActive && !selectedValue,
          'label-floating': isActive || selectedValue,
          'label-error': isInvalid
        }">
    {{ label }}
    @if (isRequired) {
      <span class="required">*</span>
    }
  </span>

  <div class="custom-dropdown-selected"
       tabindex="0"
       (click)="toggleDropdown()"
       (focus)="isActive = true"
       (blur)="onBlur()"
       [class.placeholder-mode]="!selectedLabel">
    
    <span class="selected-text">{{ selectedLabel ? selectedLabel : 'Choose a service' }}</span>
    
    <svg class="dropdown-arrow" [class.rotated]="isOpen" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M4 6L8 10L12 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
  </div>

  @if(isOpen) {
    <ul class="custom-dropdown-list" [class.open-up]="isOpenUp">
      @for (option of options; track option.value) {
        <li (click)="selectOption(option)"
            [class.selected]="selectedValue === option.value">
          {{ option.name }}
        </li>
      }

      @if(draggable) {
        <hr class="resize-hr" />
      }
    </ul>
  }
</div>